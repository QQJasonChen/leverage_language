<!DOCTYPE html>
<html>
<head>
    <title>Manual Save Feature Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        h1 {
            color: #1a73e8;
            margin-bottom: 20px;
        }
        
        .demo-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .ai-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .ai-button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }
        
        .ai-button.primary {
            background: #1976d2;
            color: white;
        }
        
        .ai-button.primary:hover {
            background: #1565c0;
        }
        
        .ai-button.secondary {
            background: #f0f0f0;
            color: #333;
            border: 1px solid #ddd;
        }
        
        .ai-button.secondary:hover {
            background: #e0e0e0;
        }
        
        .auto-save-toggle.active {
            background: #4CAF50;
            color: white;
        }
        
        .auto-save-toggle:not(.active) {
            background: #FF9800;
            color: white;
        }
        
        .status-display {
            background: white;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
            margin: 15px 0;
        }
        
        .success { color: #4caf50; font-weight: bold; }
        .info { color: #2196f3; }
        .warning { color: #ff9800; font-weight: bold; }
        
        .feature-list {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }
        
        .feature-list ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .feature-list li {
            margin-bottom: 5px;
        }
        
        .demo-analysis {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 12px;
            color: #333;
            display: none;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>💾 Manual Save Feature Demo</h1>
        
        <div class="demo-section">
            <h3>Auto-Save vs Manual Mode</h3>
            <p>This demonstrates how the auto-save toggle controls when reports get saved.</p>
            
            <div class="ai-controls">
                <button class="ai-button primary" onclick="generateAnalysisDemo()">✨ Generate Analysis</button>
                <button id="autoSaveBtn" class="ai-button secondary auto-save-toggle active" onclick="toggleAutoSaveDemo()">💾 Auto-Save</button>
                <button id="manualSaveBtn" class="ai-button primary" onclick="manualSaveDemo()" style="display: none;">💾 Save This Report</button>
            </div>
            
            <div class="status-display" id="statusDisplay">
                <div class="info">Status: Ready to test manual save functionality</div>
            </div>
            
            <div class="demo-analysis" id="demoAnalysis">
                <strong>🤖 AI Analysis Result:</strong><br><br>
                <strong>Word:</strong> serendipity<br>
                <strong>Definition:</strong> The occurrence of events by chance in a happy or beneficial way.<br>
                <strong>Pronunciation:</strong> /ˌserənˈdipədē/<br>
                <strong>Etymology:</strong> Coined by Horace Walpole in 1754...<br>
                <strong>Usage:</strong> "Meeting my future business partner was pure serendipity"
            </div>
        </div>
        
        <div class="demo-section">
            <h3>How It Works</h3>
            
            <div class="feature-list">
                <strong>🤖 Auto-Save Mode (Default):</strong>
                <ul>
                    <li>✅ Button shows "💾 Auto-Save" with green background</li>
                    <li>✅ Every AI analysis gets automatically saved</li>
                    <li>✅ Manual save button is hidden (not needed)</li>
                    <li>✅ Perfect for building comprehensive vocabulary collection</li>
                </ul>
            </div>
            
            <div class="feature-list">
                <strong>💾 Manual Mode:</strong>
                <ul>
                    <li>🧠 Button shows "💾 Manual" with orange background</li>
                    <li>🧠 AI analysis is generated but NOT automatically saved</li>
                    <li>🧠 "💾 Save This Report" button appears after analysis</li>
                    <li>🧠 You choose what to save - perfect for selective learning</li>
                </ul>
            </div>
        </div>
        
        <div class="demo-section">
            <h3>Test Instructions</h3>
            <div class="status-display">
                <ol>
                    <li><strong>Test Auto-Save Mode:</strong>
                        <ul>
                            <li>1. Ensure button shows "💾 Auto-Save" (green)</li>
                            <li>2. Click "✨ Generate Analysis"</li>
                            <li>3. Notice: Analysis appears, no save button (auto-saved)</li>
                        </ul>
                    </li>
                    <li><strong>Test Manual Mode:</strong>
                        <ul>
                            <li>1. Click "💾 Auto-Save" to switch to Manual mode (orange)</li>
                            <li>2. Click "✨ Generate Analysis"</li>
                            <li>3. Notice: Analysis appears + "💾 Save This Report" button</li>
                            <li>4. Click "💾 Save This Report" to manually save</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>
        
        <div class="demo-section">
            <h3>Use Cases</h3>
            <div class="feature-list">
                <strong>👍 Use Auto-Save When:</strong>
                <ul>
                    <li>📚 Active vocabulary learning</li>
                    <li>📊 Building comprehensive word collection</li>
                    <li>⏰ You want convenience and don't want to decide each time</li>
                    <li>📈 Tracking progress over time</li>
                </ul>
            </div>
            
            <div class="feature-list">
                <strong>🎯 Use Manual Mode When:</strong>
                <ul>
                    <li>🔍 Just browsing/exploring words casually</li>
                    <li>🧪 Testing different words before committing</li>
                    <li>💽 Managing storage space carefully</li>
                    <li>🎨 Building curated collection of important words only</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        let isAutoSave = true;
        let hasAnalysis = false;
        
        function updateStatus(message, type = 'info') {
            const status = document.getElementById('statusDisplay');
            const className = type === 'success' ? 'success' : type === 'warning' ? 'warning' : 'info';
            const timestamp = new Date().toLocaleTimeString();
            status.innerHTML = `<div class="${className}">[${timestamp}] ${message}</div>`;
        }
        
        function toggleAutoSaveDemo() {
            isAutoSave = !isAutoSave;
            const autoSaveBtn = document.getElementById('autoSaveBtn');
            const manualSaveBtn = document.getElementById('manualSaveBtn');
            
            if (isAutoSave) {
                autoSaveBtn.textContent = '💾 Auto-Save';
                autoSaveBtn.classList.add('active');
                manualSaveBtn.style.display = 'none';
                updateStatus('✅ Auto-Save Mode: All analyses will be saved automatically', 'success');
            } else {
                autoSaveBtn.textContent = '💾 Manual';
                autoSaveBtn.classList.remove('active');
                if (hasAnalysis) {
                    manualSaveBtn.style.display = 'inline-block';
                }
                updateStatus('🧠 Manual Mode: You choose what to save', 'warning');
            }
        }
        
        function generateAnalysisDemo() {
            const demoAnalysis = document.getElementById('demoAnalysis');
            const manualSaveBtn = document.getElementById('manualSaveBtn');
            
            // Show analysis
            demoAnalysis.style.display = 'block';
            hasAnalysis = true;
            
            if (isAutoSave) {
                updateStatus('✅ Analysis generated and automatically saved!', 'success');
                manualSaveBtn.style.display = 'none';
            } else {
                updateStatus('🧠 Analysis generated! Click "Save This Report" to save it.', 'warning');
                manualSaveBtn.style.display = 'inline-block';
            }
        }
        
        function manualSaveDemo() {
            const manualSaveBtn = document.getElementById('manualSaveBtn');
            
            // Show saving state
            manualSaveBtn.textContent = '💾 Saving...';
            manualSaveBtn.disabled = true;
            
            // Simulate save process
            setTimeout(() => {
                manualSaveBtn.textContent = '✅ Saved';
                manualSaveBtn.style.background = '#4CAF50';
                updateStatus('✅ Report saved successfully to "💾 Saved" tab!', 'success');
                
                // Revert after 2 seconds
                setTimeout(() => {
                    manualSaveBtn.textContent = '💾 Save This Report';
                    manualSaveBtn.style.background = '';
                    manualSaveBtn.disabled = false;
                }, 2000);
            }, 1000);
        }
        
        // Initial status
        updateStatus('Demo loaded. Toggle between Auto-Save and Manual modes to test functionality.');
    </script>
</body>
</html>